<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>æ‰˜ç¦ç‰¹è®­ Pro (æ²‰æµ¸è·Ÿè¯»ç‰ˆ)</title>
    <style>
        :root {
            --primary: #4f46e5;
            --bg: #f1f5f9;
            --card-bg: #ffffff;
            --text: #334155;
            --success: #10b981;
            --error: #ef4444;
            --header-height: 65px;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            margin: 0; padding: 0; height: 100dvh; 
            display: flex; flex-direction: column; overflow: hidden; user-select: none;
        }

        /* === Toast æç¤ºæ¡ (é¡¶éƒ¨å¼¹å‡º) === */
        #toast {
            position: fixed; top: -50px; left: 50%; transform: translateX(-50%);
            background: rgba(0,0,0,0.8); color: white; padding: 8px 20px; border-radius: 20px;
            font-size: 14px; z-index: 200; transition: top 0.3s ease; font-weight: 600;
            white-space: nowrap; box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            display: flex; align-items: center; gap: 8px;
        }
        #toast.show { top: 80px; }
        #toast.success { background: var(--success); }
        #toast.error { background: var(--error); }

        /* Header */
        header {
            height: var(--header-height); background: rgba(255, 255, 255, 0.98);
            padding: 0 10px; display: flex; align-items: center; justify-content: space-between;
            box-shadow: 0 1px 5px rgba(0,0,0,0.05); z-index: 50; flex-shrink: 0; gap: 6px;
        }
        .stat-box { font-size: 12px; font-weight: 600; color: #64748b; display: flex; align-items: center; min-width: 40px; }
        .error-text { color: var(--error); }
        
        .search-form {
            flex: 1; display: flex; align-items: center; background: #f8fafc;
            border: 1px solid #e2e8f0; border-radius: 20px; padding: 2px 4px 2px 10px; max-width: 45%;
        }
        #search-input { border: none; background: transparent; width: 100%; font-size: 13px; color: #334155; padding: 6px 0; }
        .search-btn { background: var(--primary); color: white; border: none; border-radius: 50%; width: 28px; height: 28px; cursor: pointer; }

        .info-right { display: flex; flex-direction: column; align-items: flex-end; font-size: 11px; min-width: 70px; }
        .total-num { font-weight: 800; color: var(--primary); font-size: 12px; }
        .timer-box { font-weight: 600; color: #64748b; font-variant-numeric: tabular-nums; }
        #progress-container { position: absolute; bottom: 0; left: 0; width: 100%; height: 3px; background: transparent; }
        #progress-bar { height: 100%; background: var(--success); width: 0%; transition: width 0.3s ease; }

        /* Main */
        main { flex: 1; overflow-y: auto; padding: 15px; padding-bottom: 100px; -webkit-overflow-scrolling: touch; }
        .grid-container { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; max-width: 600px; margin: 0 auto; }
        .col-header { text-align: center; color: #94a3b8; font-size: 12px; text-transform: uppercase; margin-bottom: 8px; }

        /* === æ ¸å¿ƒå¡ç‰‡æ ·å¼ä¿®æ”¹ === */
        .card {
            background: var(--card-bg); border-radius: 10px; height: 95px; /* ç¨å¾®å¢é«˜ä¸€ç‚¹ */
            display: flex; align-items: center; justify-content: center; text-align: center;
            padding: 4px 6px; box-shadow: 0 1px 2px rgba(0,0,0,0.05); border: 2px solid transparent;
            transition: all 0.15s ease; cursor: pointer; overflow: hidden; position: relative;
        }
        
        /* è‹±æ–‡å¡ç‰‡ï¼šFlex å¸ƒå±€ï¼Œæ–‡å­—å·¦ï¼Œå›¾æ ‡å³ */
        .card.en { 
            justify-content: space-between; /* å·¦å³åˆ†å¼€ */
            padding-right: 2px; /* å³ä¾§ç•™ç©ºç»™å›¾æ ‡ */
        }
        
        .word-text {
            flex: 1; /* å æ®å‰©ä½™ç©ºé—´ */
            font-size: 15px; font-weight: 600; color: #1e293b; font-family: 'Georgia', serif;
            word-break: break-word; padding-right: 4px;
            text-align: center; /* é»˜è®¤å±…ä¸­ï¼Œå¦‚æœä¸å–œæ¬¢å¯ä»¥æ”¹æˆ left */
        }

        /* å›¾æ ‡æ“ä½œåŒº */
        .icon-bar {
            display: flex; flex-direction: column; gap: 8px; 
            background: #f8fafc; padding: 4px; border-radius: 6px;
            flex-shrink: 0; /* é˜²æ­¢è¢«å‹ç¼© */
        }
        .mini-btn {
            width: 28px; height: 28px; border-radius: 50%; 
            display: flex; align-items: center; justify-content: center;
            font-size: 14px; cursor: pointer; transition: transform 0.1s;
            background: #fff; box-shadow: 0 1px 2px rgba(0,0,0,0.1); border: 1px solid #e2e8f0;
        }
        .mini-btn:active { transform: scale(0.9); }
        
        /* å½•éŸ³ä¸­åŠ¨ç”» */
        .mini-btn.recording { background: #ef4444; color: white; animation: pulse 1s infinite; border-color: #ef4444; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }

        .card.zh { font-size: 13px; color: #475569; line-height: 1.3; }
        
        /* çŠ¶æ€æ ·å¼ */
        .card.selected { border-color: var(--primary); background-color: #eef2ff; }
        .card.selected .word-text { color: var(--primary); }
        .card.matched { opacity: 0; pointer-events: none; transform: scale(0.8); }
        .card.wrong { background-color: #fef2f2; border-color: var(--error); color: var(--error); animation: shake 0.4s; }
        @keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-5px)} 75%{transform:translateX(5px)} }

        /* Footer & Feedback */
        footer {
            flex-shrink: 0; background: linear-gradient(to top, #f1f5f9 85%, rgba(241, 245, 249, 0));
            padding: 10px 20px; padding-bottom: calc(10px + env(safe-area-inset-bottom)); 
            text-align: center; pointer-events: none; position: absolute; bottom: 0; width: 100%; z-index: 20;
        }
        .btn {
            pointer-events: auto; background: var(--primary); color: white; border: none; padding: 14px 0; width: 100%; max-width: 400px;
            border-radius: 12px; font-size: 16px; font-weight: bold; box-shadow: 0 4px 10px rgba(79, 70, 229, 0.2); display: none; cursor: pointer;
        }
        .feedback-trigger { text-align: center; margin-top: 30px; padding-bottom: 10px; }
        .feedback-link { font-size: 12px; color: #94a3b8; text-decoration: none; cursor: pointer; border-bottom: 1px dashed #cbd5e1; }

        /* æ¨¡æ€æ¡† */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 100; align-items: center; justify-content: center; backdrop-filter: blur(3px); }
        .modal-content { background: white; width: 85%; max-width: 320px; border-radius: 16px; padding: 25px; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
        
        /* åŠ è½½ */
        #loading-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 999; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .spinner { width: 40px; height: 40px; border: 4px solid #e2e8f0; border-top-color: var(--primary); border-radius: 50%; animation: spin 0.8s linear infinite; margin-bottom: 15px; }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        /* åé¦ˆæ˜Ÿæ˜Ÿ */
        .star-rating { font-size: 28px; color: #e2e8f0; margin-bottom: 15px; cursor: pointer; }
        .star-rating span.active { color: #fbbf24; }
        #feedback-text { width: 100%; height: 80px; border: 1px solid #e2e8f0; border-radius: 8px; padding: 10px; font-size: 14px; margin-bottom: 15px; resize: none; }
        .modal-btn { background: #e2e8f0; color: #475569; border: none; padding: 10px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; width: 100%; margin-top: 5px;}
        .btn-primary { background: var(--primary); color: white; }
    </style>
</head>
<body>

    <!-- å…¨å±€ Toast æç¤º -->
    <div id="toast"></div>

    <!-- æœç´¢å¼¹çª— -->
    <div id="search-modal" class="modal-overlay" onclick="closeModal('search-modal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div id="modal-word" style="font-size:24px; font-weight:bold; color:#4f46e5; margin-bottom:10px;"></div>
            <div id="modal-def" style="color:#475569; margin-bottom:20px;"></div>
            <button class="modal-btn" onclick="closeModal('search-modal')">å…³é—­</button>
        </div>
    </div>

    <!-- åé¦ˆå¼¹çª— -->
    <div id="feedback-modal" class="modal-overlay" onclick="closeModal('feedback-modal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h3 style="margin:0 0 15px 0; color:#334155;">ğŸ“ ç•™è¨€è¯„ä»·</h3>
            <div class="star-rating" id="star-container">
                <span data-val="1">â˜…</span><span data-val="2">â˜…</span><span data-val="3">â˜…</span><span data-val="4">â˜…</span><span data-val="5">â˜…</span>
            </div>
            <textarea id="feedback-text" placeholder="è¯·å†™ä¸‹æ‚¨çš„å»ºè®®..."></textarea>
            <button id="submit-fb-btn" class="modal-btn btn-primary" onclick="submitFeedback()">æäº¤åé¦ˆ</button>
            <button class="modal-btn" style="margin-top:8px; background:transparent;" onclick="closeModal('feedback-modal')">å–æ¶ˆ</button>
        </div>
    </div>

    <!-- åŠ è½½ -->
    <div id="loading-screen">
        <div class="spinner"></div>
        <div id="loading-text" style="color:#64748b; font-size:14px;">æ­£åœ¨åŠ è½½é¢˜åº“...</div>
    </div>

    <header>
        <div class="stat-box">âŒ <span id="error-rate-display" style="margin-left:4px">0/0</span></div>
        <form class="search-form" action="javascript:void(0);" onsubmit="submitSearch()">
            <input type="search" id="search-input" placeholder="æœè¯..." autocomplete="off">
            <button type="submit" class="search-btn">ğŸ”</button>
        </form>
        <div class="info-right">
            <div class="total-count-box">Total: <span id="total-count-display" class="total-num">--</span></div>
            <div class="timer-box">â± <span id="timer-display">00:00</span></div>
        </div>
        <div id="progress-container"><div id="progress-bar"></div></div>
    </header>

    <main>
        <div class="grid-container">
            <div class="column">
                <div class="col-header">Word</div>
                <div id="col-en" style="display:grid; gap:10px;"></div>
            </div>
            <div class="column">
                <div class="col-header">Meaning</div>
                <div id="col-zh" style="display:grid; gap:10px;"></div>
            </div>
        </div>
        <div class="feedback-trigger">
            <span class="feedback-link" onclick="openFeedback()">âœï¸ æäº¤åé¦ˆ / è¯„ä»·</span>
        </div>
    </main>

    <footer>
        <button class="btn" id="next-btn" onclick="nextLevel()">ä¸‹ä¸€ç»„ (Next Level)</button>
    </footer>

    <script>
        const WORD_API = "https://api.npoint.io/ef9cd015292eaa3ac09b"; 
        const FORMSPREE_ENDPOINT = "https://formspree.io/f/xjklqldr"; // è¯·æ›¿æ¢ID

        let fullLibrary = []; let gamePool = []; let currentRound = []; 
        let matches = 0; let selectedEn = null, selectedZh = null; let isProcessing = false; 
        let totalAttempts = 0; let totalErrors = 0;
        let timerInterval = null; let secondsElapsed = 0;
        let currentRating = 5;

        // è¯­éŸ³å˜é‡
        let recognition = null;
        let currentRecogBtn = null;

        async function init() {
            const loadingText = document.getElementById('loading-text');
            try {
                loadingText.innerText = "æ­£åœ¨ä¸‹è½½æ•°æ®...";
                const res = await fetch(WORD_API);
                if(!res.ok) throw new Error("ç½‘ç»œè¯·æ±‚å¤±è´¥");
                let data = await res.json();
                let dataArray = [];
                if (Array.isArray(data)) dataArray = data;
                else if (typeof data === 'object') dataArray = data.words || data.list || Object.values(data);
                
                fullLibrary = dataArray.map(item => {
                    let en, zh;
                    if(Array.isArray(item)) { en = item[0]; zh = item[1]; }
                    else { en = item.en; zh = item.zh; }
                    if(en) return { en: String(en).trim(), zh: zh ? String(zh).trim() : "æš‚æ— é‡Šä¹‰" };
                    return null;
                }).filter(i => i);

                document.getElementById('total-count-display').innerText = fullLibrary.length;
                document.getElementById('loading-screen').style.display = 'none';
                
                initStarRating();
                initSpeech();
                startGame();
            } catch (err) {
                loadingText.innerHTML = `é”™è¯¯: ${err.message} <br><br> <u onclick="location.reload()">ç‚¹å‡»é‡è¯•</u>`;
            }
        }

        function startGame() {
            gamePool = JSON.parse(JSON.stringify(fullLibrary));
            shuffle(gamePool);
            updateStats();
            startTimer();
            loadLevel();
        }

        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            secondsElapsed = 0;
            timerInterval = setInterval(() => {
                secondsElapsed++;
                const m = Math.floor(secondsElapsed / 60).toString().padStart(2, '0');
                const s = (secondsElapsed % 60).toString().padStart(2, '0');
                document.getElementById('timer-display').innerText = `${m}:${s}`;
            }, 1000);
        }

        // ==========================================
        // æ ¸å¿ƒï¼šå¡ç‰‡å†…è¯­éŸ³åŠŸèƒ½
        // ==========================================
        function initSpeech() {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            if (SpeechRecognition) {
                recognition = new SpeechRecognition();
                recognition.lang = 'en-US';
                recognition.continuous = false;
                recognition.interimResults = false;

                recognition.onstart = () => {
                    if(currentRecogBtn) currentRecogBtn.classList.add('recording');
                    showToast("ğŸ™ï¸ è¯·å¤§å£°æœ—è¯»...", "");
                };

                recognition.onend = () => {
                    if(currentRecogBtn) currentRecogBtn.classList.remove('recording');
                    currentRecogBtn = null;
                };

                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript.toLowerCase();
                    const targetWord = currentRecogBtn ? currentRecogBtn.dataset.target : "";
                    checkPronunciation(transcript, targetWord);
                };
            }
        }

        function playCardAudio(e, text) {
            e.stopPropagation(); // â˜… é˜»æ­¢è§¦å‘é€‰è¯é€»è¾‘
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US';
            utterance.rate = 0.9;
            window.speechSynthesis.speak(utterance);
        }

        function startCardSpeech(e, text, btnElement) {
            e.stopPropagation(); // â˜… é˜»æ­¢è§¦å‘é€‰è¯é€»è¾‘
            
            if (!recognition) {
                alert("æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«ï¼Œè¯·ä½¿ç”¨ Chrome/Safari");
                return;
            }
            
            // å¦‚æœæ­£åœ¨å½•éŸ³ï¼Œåˆ™åœæ­¢
            if (currentRecogBtn) {
                recognition.stop();
                if (currentRecogBtn === btnElement) return; // ç‚¹å‡»åŒä¸€ä¸ªæŒ‰é’®ï¼Œåœæ­¢åä¸é‡å¯
            }

            currentRecogBtn = btnElement;
            currentRecogBtn.dataset.target = text; // ç»‘å®šç›®æ ‡è¯
            try {
                recognition.start();
            } catch(err) {
                recognition.stop();
                setTimeout(() => recognition.start(), 100);
            }
        }

        function checkPronunciation(userSpoke, targetWord) {
            if (!targetWord) return;
            
            const cleanTarget = targetWord.toLowerCase().replace(/[^a-z]/g, '');
            const cleanUser = userSpoke.replace(/[^a-z]/g, '');

            const isMatch = cleanUser === cleanTarget || cleanUser.includes(cleanTarget) || cleanTarget.includes(cleanUser);

            if (isMatch) {
                showToast(`âœ… æ­£ç¡®: ${userSpoke}`, "success");
                if (navigator.vibrate) navigator.vibrate([50, 50]);
            } else {
                showToast(`âš ï¸ è¯†åˆ«ä¸º: ${userSpoke}`, "error");
            }
        }

        function showToast(msg, type) {
            const toast = document.getElementById('toast');
            toast.innerText = msg;
            toast.className = ""; // reset
            if (type) toast.classList.add(type);
            toast.classList.add('show');
            
            // 2ç§’åæ¶ˆå¤±
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2500);
        }

        // ==========================================
        // æ¸¸æˆç•Œé¢é€»è¾‘ (åŒ…å« createCard ä¿®æ”¹)
        // ==========================================
        function loadLevel() {
            document.getElementById('next-btn').style.display = 'none';
            matches = 0; selectedEn = null; selectedZh = null;
            if (gamePool.length === 0) { alert("æ­å–œï¼æ‰€æœ‰å•è¯å·²å®Œæˆï¼"); return; }
            const count = Math.min(8, gamePool.length);
            currentRound = gamePool.splice(0, count);
            updateStats();
            
            const colEn = document.getElementById('col-en');
            const colZh = document.getElementById('col-zh');
            colEn.innerHTML = ''; colZh.innerHTML = '';

            let listEn = currentRound.map(i => ({id: i.en, text: i.en, type: 'en'}));
            let listZh = currentRound.map(i => ({id: i.en, text: i.zh, type: 'zh'}));
            shuffle(listEn); shuffle(listZh);

            listEn.forEach(d => colEn.appendChild(createCard(d)));
            listZh.forEach(d => colZh.appendChild(createCard(d)));
        }

        function createCard(data) {
            const div = document.createElement('div');
            div.className = `card ${data.type}`;
            div.dataset.id = data.id;
            div.dataset.type = data.type;
            
            if (data.type === 'en') {
                // === è‹±æ–‡å¡ç‰‡ç‰¹æ®Šç»“æ„ï¼šæ–‡å­— + å›¾æ ‡æ  ===
                div.innerHTML = `
                    <div class="word-text">${data.text}</div>
                    <div class="icon-bar">
                        <div class="mini-btn" onclick="playCardAudio(event, '${data.text}')">ğŸ”Š</div>
                        <div class="mini-btn" onclick="startCardSpeech(event, '${data.text}', this)">ğŸ™ï¸</div>
                    </div>
                `;
            } else {
                // === ä¸­æ–‡å¡ç‰‡ä¿æŒåŸæ · ===
                div.innerText = data.text;
            }
            
            // ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼ˆç”¨äºæ¸¸æˆåŒ¹é…ï¼‰
            div.addEventListener('click', (e) => handleTap(div));
            return div;
        }

        function handleTap(el) {
            if (isProcessing || el.classList.contains('matched') || el.classList.contains('selected')) return;
            if (navigator.vibrate) navigator.vibrate(5);
            el.classList.add('selected');
            if (el.dataset.type === 'en') {
                if (selectedEn) selectedEn.classList.remove('selected');
                selectedEn = el;
            } else {
                if (selectedZh) selectedZh.classList.remove('selected');
                selectedZh = el;
            }
            if (selectedEn && selectedZh) checkMatch();
        }

        function checkMatch() {
            isProcessing = true;
            const isMatch = selectedEn.dataset.id === selectedZh.dataset.id;
            totalAttempts++; if (!isMatch) totalErrors++;
            updateErrorStats();
            if (isMatch) {
                matches++;
                selectedEn.classList.replace('selected', 'matched');
                selectedZh.classList.replace('selected', 'matched');
                selectedEn = null; selectedZh = null; isProcessing = false;
                if (matches === currentRound.length) {
                    document.getElementById('next-btn').style.display = 'block';
                    setTimeout(() => { document.querySelector('main').scrollTo({ top: 9999, behavior: 'smooth' }); }, 200);
                }
            } else {
                selectedEn.classList.add('wrong'); selectedZh.classList.add('wrong');
                if (navigator.vibrate) navigator.vibrate(50);
                setTimeout(() => {
                    selectedEn.classList.remove('selected', 'wrong'); selectedZh.classList.remove('selected', 'wrong');
                    selectedEn = null; selectedZh = null; isProcessing = false;
                }, 400);
            }
        }

        // æœç´¢ä¸åé¦ˆé€»è¾‘ä¿æŒä¸å˜
        function submitSearch() {
            const input = document.getElementById('search-input');
            const query = input.value.trim().toLowerCase();
            input.blur();
            if (!query) return;
            let result = fullLibrary.find(w => w.en.toLowerCase() === query);
            if (!result) result = fullLibrary.find(w => w.en.toLowerCase().startsWith(query));
            if (!result) result = fullLibrary.find(w => w.en.toLowerCase().includes(query));
            if (result) {
                document.getElementById('modal-word').innerText = result.en;
                document.getElementById('modal-def').innerText = result.zh;
                document.getElementById('search-modal').style.display = 'flex';
            } else {
                alert("æœªæ‰¾åˆ°å•è¯");
            }
            document.getElementById('search-input').value = '';
        }

        function updateErrorStats() {
            const el = document.getElementById('error-rate-display');
            el.innerText = `${totalErrors}/${totalAttempts}`;
            if (totalErrors > 0) el.classList.add('error-text');
        }
        function updateStats() {
            const total = fullLibrary.length;
            const pct = total > 0 ? ((total - gamePool.length) / total) * 100 : 0;
            document.getElementById('progress-bar').style.width = `${pct}%`;
        }
        function shuffle(arr) { arr.sort(() => Math.random() - 0.5); }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }
        
        // åé¦ˆ
        function openFeedback() { 
             if (FORMSPREE_ENDPOINT.includes("YOUR_FORM")) { alert("è¯·é…ç½® Formspree ID"); return; }
             document.getElementById('feedback-modal').style.display = 'flex'; 
        }
        function initStarRating() {
             const stars = document.querySelectorAll('#star-container span');
             stars.forEach(star => { star.onclick = function() { currentRating = parseInt(this.dataset.val); updateStars(); } });
             updateStars();
        }
        function updateStars() {
             const stars = document.querySelectorAll('#star-container span');
             stars.forEach(s => { if(parseInt(s.dataset.val) <= currentRating) s.classList.add('active'); else s.classList.remove('active'); });
        }
        async function submitFeedback() {
            const text = document.getElementById('feedback-text').value.trim();
            const btn = document.getElementById('submit-fb-btn');
            if(!text) { alert("è¯·å¡«å†™å†…å®¹"); return; }
            btn.disabled = true; btn.innerText = "å‘é€ä¸­...";
            try {
                const response = await fetch(FORMSPREE_ENDPOINT, {
                    method: 'POST', body: JSON.stringify({ rating: currentRating + "æ˜Ÿ", message: text, date: new Date().toLocaleString() }),
                    headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' }
                });
                if (response.ok) { alert("åé¦ˆå·²å‘é€ï¼"); document.getElementById('feedback-text').value = ''; closeModal('feedback-modal'); }
                else throw new Error("æäº¤å¤±è´¥");
            } catch (err) { alert(err.message); } finally { btn.disabled = false; btn.innerText = "æäº¤åé¦ˆ"; }
        }

        init();
    </script>
</body>
</html>
